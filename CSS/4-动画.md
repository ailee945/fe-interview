# 动画

[toc]

## 对比过渡和动画

过渡`transition`是在两种状态间切换时的动画效果[MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition)

动画`animation`通过`@keyframe`设定动画关键帧，可以同时设定多组动画[MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation)

根据定义，`transition`可以看最作`animation`中，一组`@keyframe`包含`from（0%）`和`to（100%）`两个关键帧（状态）的特殊情况

区别如下：

`transition`

- 事件驱动：需要访客或JS使状态发生变化后触发
- 一次性：想要循环，需要反复修改状态
- 定义两个状态：开始状态和结束状态
- 可指定唯一过渡属性：`transition-property:all`默认两个状态间所有可过渡属性，都会有补间动画。可以通过`transition-property`指定可以唯一过渡属性

`animation`

- 自动执行或事件驱动
- 循环或指定执行次数
- 定义多个状态
- 不可指定唯一过渡属性
- 可控制：暂停，播放等

## 如何优化 CSS 动画的性能？

- 减少不必要动画
  - 设备：尽可能适应低配置设备
  - 耗电量：减少耗电量
  - 引发不适：避免闪烁、变化强烈、3D 眩晕动画
  - 用户原因（喜好、疾病、工作等）已配置减少动画
- 提升动画体验
  - 减少不必要动画元素和属性，避免使用`transition:all`
  - 减少重排、重绘
  - 不同属性值引起改变，重新渲染有三种执行路径，尽量只使用合成属性
    |属性类型|执行路径|属性举例|
    |:---:|:---:|:---:|
    |重排属性|layout > paint > composite|盒模型:display padding margin width height min-height border-width;</hr>定位及浮动:position top bottom left right float clear;</hr>文字及溢出:font-family font-size font-weight line-height text-align vertical-align white-space overflow flow-y;|
    |重绘属性|paint > composite|color border-style border-radius visibility text-decoration background background-image background-position background-repeat background-size outline outline-color outline-style outline-width box-shadow|
    |合成属性|layout|transform opacity backface-visibility perspective perspective-origin|
  - 避免需要大量计算的属性`box-shadow:fliter`
  - 开启硬件加速`transform: translate3d(0, 0, 0)` `transform: translateZ(0)` `will-change:transform`可开启，内存占用可能增加
  - 创建层叠上下文，动画元素脱离文档流，独立图层，例如：
    - position为absolute或fixed
    - contain包含layout或paint
  
![chrome FPS帧率显示工具](./img/帧率显示工具.png)

## 对比 CSS 动画和 JS 动画？

## 纯 CSS 实现打字机效果

## 纯 CSS 实现暗黑、夜间模式

## 纯 CSS 实现骨架屏
