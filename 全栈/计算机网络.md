# 计算机网络

[toc]

## 对比持续通信的方法？

- 轮询
  - 通过setTimeout或者setInterval定时获取并刷新页面上的数据
  - 定时查询，不一定有新数据
  - 并发较多时，增加服务器负担
- 长连接
  - 页面其纳入iframe，将src设为长连接
  - 减少无用请求
  - 并发较多时增加服务器负担
- 长轮询
  - 服务端收到请求后，hold住链接，直到有新消息返回时才相应
  - 减少无用请求
  - 返回数据顺序无保证
- Flash Socket
  - 客户端通过嵌入Socket类Flash与服务器端的Socket接口通信
  - 真正的即时通信
  - 非HTTP协议，无法自动穿越防火墙
- WebSocket
  - 在客户端和服务器端打开交互式通信会话
  - 兼容HTTP协议。与HTTP同属应用层。默认端口是80和443
  - 建立在TCP协议的基础上，与HTTP协议同属于应用层
  - 数据格式轻量，性能开销小，通信高效
  - 可以发送文本，也可以发送二进制数据
  - **没有同源限制**
  - 协议表示符ws 加密wss
  
    socket.io
  
    - 跨平台的Websocket库，API前后端一致，可以触发和相应自定义事件

      ```js
      // 服务端
      const io = require("socket.io")(3000)
      io.on('connection', socket => {
        socket.on('update item', (arg1, arg2, callback) => {
          console.log(arg1, arg2)
          callback({ status: 'fulfilled' })
        })
      })
      // 客户端
      const socket = io()
      socket.emit('update item', "1", { name: 'updated' }, res => {
        console.log(res.status) // ok
      })
      ```

## 网络结构按五层和七层分别是？

TCP / IP 体系结构

- 网络接口层
- 网际层 IP
- 运输层 TCP 或 UDP
- 应用层（TELNET FTP SMTP等）

五层

- 物理层
- 数据链路层
- 网络层
- 运输层
- 应用层

七层：Open System Inerconnect Reference Model 开放式系统互联通信参考模型

- 物理层
- 数据链路层
- 网络层
- 传输层
- 会话层
- 表达层
- 应用层

## 什么是 TCP 三次握手，为什么要三次握手？

### 什么是 TCP 三次握手？

- 起初
  - 客户端 CLOSED
  - 服务端 CLOSED
- 第一次握手
  - 客户端发送请求报文
    - 传输自身通讯初始序号
    - 客户端 SYN-SENT
- 第二次握手
  - 服务器接收请求报文
    - 同意连接
      - 传输自身通讯初始序号
      - 服务端 SYN-RECEIVED
    - 拒绝连接
      - 服务端 REFUSED
- 第三次握手
  - 客户端接收应答报文
    - 客户端发送确认报文
    - 客户端 ESTABLISHED
  - 服务端接收确认报文
    - 服务端 ESTABLISHED

### 为什么要三次握手？

- 客户端首次发送请求无应答，TCP 启动超时重传
- 服务器收到重传的请求，建立连接，接收数据，关闭连接
- 服务器收到客户端首次发送请求，再次建立连接，但客户端已经关闭连接

需要三次握手，客户端发送确认报文后再建立连接，避免重复建立连接

## 浏览器有哪些请求方法？

安全：请求会倾向服务器资源

幂等：多次执行重复操作，结果相同

|方法|描述|请求体|响应体|支持表单|安全|幂等|可缓存|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|GET|请求资源|无|有|是|是|是|是|
|HEAD|请求资源头部|无|无|否|是|是|是|
|POST|发送数据 数据类型由Content-type指定|有|有|是|否|否|响应头包含expires和max-age|
|PUT|发送负载创建或者替换目标资源|有|无|否|否|是|否|
|DELETE|删除资源|不限|不限|否|否|是|否|
|CONNECT|创建点到点沟通隧道|无|有|否|否|否|否|
|OPTIONS|检测服务器支持方法|无|有|否|是|是|否|
|TRACE|消息环路测试 多用于路由检测|无|无|否|是|是|否|
|PATCH|部分修改资源|有|有|否|否|否|否|

## 提交表单的内容类型有哪些？

- application/x-www-form-urlencoded：初始的默认值

  ```http
  Content-Type：application/x-www-form-urlencoded
  ...
  key1=value1&key2=value2
  ```

- multipart/form-data：适用于使用`<input>`标签上传的文件

  ```http
  Content-Type：multipart/form-data; boundary=------数据边界值
  ...
  ------数据边界值
  Content-Disposition: form-data; name="key1"
  value1
  ------数据边界值
  Content-Disposition: form-data; name="key2"
  value2
  ```

- text/plain：HTML5 引入类型

  ```http
  Content-Type：text/plain
  ...
  key1=value1
  key2=value2
  ```

## docker 与虚拟机区别

## 对比 Intel 的 VT-x，VT-d，VT-c

## 什么是 URL ？

## 什么是 HTTP 报文？

## 常见的 HTTP 状态码有哪些？

## 常用的 HTTP 方法有哪些，GET 和 POST 的区别是什么？

## 常见的 HTTP 请求头和响应头有哪些？

## 什么是 HTTPS，与 HTTP 的区别？

## 对比 HTTP1.0 / HTTP1.1 / HTTP2.0 / HTTP3.0？

## Cookie 和 Session 的区别？
